!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=7)}([function(t,e){t.exports={tileset:{$:{version:"1.2",tiledversion:"1.2.0",name:"wood_tileset",tilewidth:"32",tileheight:"32",tilecount:"256",columns:"16"},image:[{$:{source:"wood_tileset.png",width:"512",height:"512"}}]}}},function(t,e){t.exports={tileset:{$:{version:"1.2",tiledversion:"1.2.0",name:"Panda2",tilewidth:"32",tileheight:"32",tilecount:"40",columns:"5"},image:[{$:{source:"Panda2.png",width:"160",height:"256"}}]}}},function(t,e,i){t.exports=i.p+"2cafb91877cbda9df58aa5693a889f5d.png"},function(t,e){t.exports={tileset:{$:{version:"1.2",tiledversion:"1.2.0",name:"Tilesheet-water",tilewidth:"32",tileheight:"32",tilecount:"64",columns:"8"},image:[{$:{source:"Tilesheet-water.png",width:"256",height:"256"}}]}}},function(t,e,i){t.exports=i.p+"2f7d3cea0d7b035283b9bc629fb6138d.png"},function(t,e,i){t.exports=i.p+"095d984352a535c01d2ec2bc9a4027f5.png"},function(t){t.exports={height:24,infinite:!1,layers:[{data:[156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,142,143,144,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,142,143,144,156,156,156,156,156,156,156,156,156,156,158,159,160,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,158,159,160,156,156,156,156,156,156,156,156,156,156,174,175,176,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,174,175,176,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,142,143,144,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,158,159,160,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,142,143,144,156,156,156,156,156,156,156,156,174,175,176,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,158,159,160,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,174,175,176,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,142,143,144,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,158,159,160,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,174,175,176,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156,156],height:24,id:4,name:"background",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,206,207,208,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,222,223,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,238,239,240,0,0,187,188,0,0,0,0,0,0,205,206,207,208,0,0,0,0,0,0,0,0,0,187,188,0,0,0,0,254,255,0,0,0,203,204,0,0,0,0,0,0,221,222,223,224,0,0,0,0,0,0,0,0,0,203,204,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,238,239,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,255,0,0,0,0,0,0,0,0,52,53,53,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,104,0,0,70,0,0,0,187,188,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,104,0,0,0,103,54,0,0,203,204,0,0,0,0,0,205,206,207,208,0,0,0,0,0,0,0,0,0,187,188,52,104,0,0,0,0,0,70,0,0,0,0,0,0,0,0,0,221,222,223,224,0,0,0,0,0,0,0,0,0,203,204,68,0,0,0,0,0,87,86,0,0,0,0,0,0,0,0,0,237,238,239,240,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,0,87,86,0,0,0,0,0,0,0,0,0,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,84,88,0,0,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,0,0,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,206,207,208,0,0,0,0,84,88,0,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,222,223,224,0,0,0,0,0,84,85,85,86,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,238,239,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,206,207,208,0,0,0,0,0,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,221,222,223,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,237,238,239,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,187,188,0,0,0,0,0,0,0,0,0,0,0,0,0,187,188,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,203,204,0,0,0,0,0,0,0,0,0,0,0,0,0,203,204,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:24,id:6,name:"trees_lake",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,293,284,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,292,285,285,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,150,293,292,292,293,285,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,292,292,292,292,285,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,293,293,284,284,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,292,285,285,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,292,285,293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,284,293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:24,id:8,name:"water",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0}],nextlayerid:9,nextobjectid:16,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.2.0",tileheight:32,tilesets:[{firstgid:1,source:"wood_tileset.tsx"},{firstgid:257,source:"Tilesheet-water.tsx"}],tilewidth:32,type:"map",version:1.2,width:32}},function(t,e,i){"use strict";i.r(e);class s{constructor(){this.oldState={},this.newState={},window.addEventListener("keydown",t=>{t.preventDefault(),this.newState[t.key]=!0}),window.addEventListener("keyup",t=>{t.preventDefault(),this.newState[t.key]=!1})}update(){this.oldState=JSON.parse(JSON.stringify(this.newState))}keyPressed(t){return this.newState[t]}keyDown(t){return this.newState[t]&&!this.oldState[t]}keyUp(t){return!this.newState[t]&&this.oldState[t]}}var n=i(0),r=i.n(n),h=i(2),o=i.n(h),a=i(3),d=i.n(a),l=i(4),c=i.n(l);var u=i(1),f=i.n(u),p=i(5),w=i.n(p);var g=new class{constructor(t,e){this._start=1,this.WIDTH=t,this.HEIGHT=e,this.input=new s,this.entities=[],this.mapJson=i(6),this.wood=new Image,this.wood.onload=(()=>{this.woodLoaded=!0}),this.wood.src=o.a,this.water=new Image,this.water.onload=(()=>{this.waterLoaded=!0}),this.water.src=c.a,this.tilesets=[r.a,r.a,d.a],this.solidTiles=[],this.backBuffer=document.createElement("canvas"),this.backBuffer.width=this.WIDTH,this.backBuffer.height=this.HEIGHT,this.backBufferCtx=this.backBuffer.getContext("2d"),this.screenBuffer=document.createElement("canvas"),this.screenBuffer.width=this.WIDTH,this.screenBuffer.height=this.HEIGHT,this.screenBufferCtx=this.screenBuffer.getContext("2d"),document.body.append(this.screenBuffer)}addEntity(t){this.entities.push(t)}update(t){this.entities.forEach(e=>e.update(t,this.input,this.solidTiles)),this.input.update()}render(t){if(this.backBufferCtx.fillStyle="white",this.backBufferCtx.fillRect(0,0,this.WIDTH,this.HEIGHT),this.woodLoaded&&this.waterLoaded){this.images=[this.wood,this.wood,this.water];for(let t=0;t<this.mapJson.layers.length;t++){let e=parseInt(this.mapJson.layers[t].width),i=parseInt(this.tilesets[t].tileset.image[0].$.width),s=parseInt(this.tilesets[t].tileset.$.tilewidth),n=this,r=0;this.mapJson.layers[t].data.forEach(function(h,o){if(t>0&&0!=h&&1===n._start&&n.solidTiles.push(r),r++,0==h)return;let a,d,l,c;2===t&&(h-=256),a=--h%(i/s)*s,d=~~(h/(i/s))*s,l=o%e*s,c=~~(o/e)*s,n.backBufferCtx.drawImage(n.images[t],a,d,s,s,l,c,s,s)})}this._start=0}this.entities.forEach(e=>e.render(t,this.backBufferCtx)),this.screenBufferCtx.drawImage(this.backBuffer,0,0)}loop(t){var e=this._frame_start?t-this._frame_start:0;this.update(e),this.render(e),this._frame_start=t,window.requestAnimationFrame(t=>{this.loop(t)})}}(1024,768);g.addEntity(new class{constructor(t,e){this.x=t,this.y=e,this.DIRECTIONS={SOUTH:{idx:[5,6,7]},NORTH:{idx:[10,11,12]},WEST:{idx:[25,26,27]},EAST:{idx:[15,16,17]}},this.direction=this.DIRECTIONS.EAST,this.moving=!1,this.panda=new Image,this.panda.onload=(()=>{this.pandaLoaded=!0}),this.panda.src=w.a,this.movingIndex=1,this.timerMove=0}update(t,e,i){let s=this.x,n=this.y;if(e.keyPressed("ArrowLeft")?(this.x--,this.direction=this.DIRECTIONS.WEST,this.moving=!0):e.keyPressed("ArrowRight")?(this.x++,this.direction=this.DIRECTIONS.EAST,this.moving=!0):e.keyPressed("ArrowUp")?(this.y--,this.direction=this.DIRECTIONS.NORTH,this.moving=!0):e.keyPressed("ArrowDown")?(this.y++,this.direction=this.DIRECTIONS.SOUTH,this.moving=!0):this.moving=!1,this.moving){let t=32*Math.floor((this.y+32)/32)+Math.floor((this.x+32)/32);i.includes(t)&&(this.x=s,this.y=n);let e=32*Math.floor((this.y+32)/32)+Math.floor(this.x/32);i.includes(e)&&(this.x=s,this.y=n),(this.x+16<0||this.x+16>1024||this.y+16<0||this.y+16>768)&&(this.x=s,this.y=n)}}render(t,e){if(this.pandaLoaded){parseInt(f.a.tileset.image[0].$.width);let i,s,n=parseInt(f.a.tileset.$.tilewidth),r=0,h=5;this.moving?(r=this.direction.idx[this.movingIndex],this.timerMove=this.timerMove+t,this.timerMove>200&&(this.movingIndex%2==0?this.movingIndex=1:this.movingIndex=2,this.timerMove=0)):r=this.direction.idx[0],i=r%h*n,s=~~(r/h)*n,e.drawImage(this.panda,i,s,n,n,this.x,this.y,n,n)}}}(g.WIDTH/2,g.HEIGHT/2)),g.loop()}]);